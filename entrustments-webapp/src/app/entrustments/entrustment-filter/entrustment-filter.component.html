
<select *ngIf="shouldShowFieldOfStudy()" [disabled]="shouldLockFieldOfStudy()" class="form-control" [(ngModel)]="filterOptions.faculty">
  <option [selected]="!filterOptions.faculty" [ngValue]="undefined">Wydział</option>
  <option *ngFor="let x of faculties" [ngValue]="x" [selected]="filterOptions.faculty == x">{{x.symbol}} {{x.name}}</option>
</select>
<!--<pre>faculty: {{ filterOptions.faculty | json }}</pre>-->
<select *ngIf="shouldShowFieldOfStudy()" [disabled]="shouldLockFieldOfStudy()" class="form-control top-buffer" [(ngModel)]="filterOptions.fieldOfStudy">
  <option [selected]="!filterOptions.fieldOfStudy" [ngValue]="undefined">Kierunek</option>
  <option *ngFor="let x of fieldsOfStudy" [ngValue]="x" [selected]="filterOptions.fieldOfStudy == x">{{x.name}}</option>
</select>
<!--<pre>fieldOfStudy: {{ filterOptions.fieldOfStudy | json }}</pre>-->
<select class="form-control" [class.top-buffer]="shouldShowFieldOfStudy()" [(ngModel)]="filterOptions.academicYear">
  <option [selected]="!filterOptions.academicYear" [ngValue]="undefined">Rok akademicki</option>
  <option *ngFor="let x of academicYears" [ngValue]="x" [selected]="filterOptions.academicYear == x">{{x}}</option>
</select>
<!--<pre>pickedAcademicYear: {{ pickedAcademicYear | json }}</pre>-->
<select class="form-control top-buffer" [(ngModel)]="filterOptions.semester">
  <option [selected]="!filterOptions.semester" [ngValue]="undefined">Semestr</option>
  <option *ngFor="let x of semesters" [ngValue]="x" [selected]="filterOptions.semester == x">{{x.semesterNumber}}</option>
</select>
<!--<pre>pickedSemester: {{ pickedSemester | json }}</pre>-->
<select class="form-control top-buffer" [(ngModel)]="filterOptions.studyLevel">
  <option [selected]="!filterOptions.studyLevel" [ngValue]="undefined">Stopień</option>
  <option *ngFor="let x of studyLevels" [ngValue]="x" [selected]="filterOptions.studyLevel == x">{{x.name}}</option>
</select>
<!--<pre>pickedStudyLevel: {{ pickedStudyLevel | json }}</pre>-->
<select class="form-control top-buffer" [(ngModel)]="filterOptions.specialty">
  <option [selected]="!filterOptions.specialty" [ngValue]="undefined">Specjalność</option>
  <option *ngFor="let x of specialties" [ngValue]="x" [selected]="filterOptions.specialty == x">{{x.shortName}} - {{x.name}}</option>
</select>
<!--<pre>pickedSpecialty: {{ pickedSpecialty | json }}</pre>-->
<input type="text" class="form-control top-buffer" [class.is-valid]="filterOptions.course" placeholder="Wpisz kod lub nazwę kursu"
       [(ngModel)]="filterOptions.course" [ngbTypeahead]="searchCourses" [resultTemplate]="rtCourse"
       (focus)="focusCoursesTextBox$.next($event.target.value)"
       (click)="clickCoursesTextBox$.next($event.target.value)"
       [inputFormatter]="formatterCourse"
       [editable]="false"
       #coursesTextBox="ngbTypeahead"/>
<!--<pre>pickedCourse: {{ pickedCourse | json }}</pre>-->
<input [hidden]="sharedDataService.actualCourseInstructor" type="text" class="form-control top-buffer" [class.is-valid]="filterOptions.courseInstrucor" placeholder="Wpisz prowadzącego"
       [(ngModel)]="filterOptions.courseInstrucor" [ngbTypeahead]="searchCourseInstructors" [resultTemplate]="rtCourseInstructor"
       (focus)="focusCourseInstructorsTextBox$.next($event.target.value)"
       (click)="clickCourseInstructorsTextBox$.next($event.target.value)"
       [inputFormatter]="formatterCourseInstructor"
       [editable]="false"
       #courseInstructorsTextBox="ngbTypeahead"/>
<!--<pre>pickedCourseInstrucor: {{ pickedCourseInstrucor | json }}</pre>-->
<select class="form-control top-buffer" [(ngModel)]="filterOptions.status">
  <option [selected]="!filterOptions.status" [ngValue]="undefined">Status</option>
  <option *ngFor="let x of statuses" [ngValue]="x" [selected]="filterOptions.status == x">{{x.toString()}}</option>
</select>
<!--<pre>pickedStatus: {{ pickedStatus | json }}</pre>-->
<div class="row top-buffer">
  <div class="col">
    <button *ngIf="!sharedDataService.actualCourseInstructor" class="btn btn-secondary" style="width: 100%" (click)="onSearchClicked()">Szukaj</button>
    <button *ngIf="sharedDataService.actualCourseInstructor" class="btn btn-secondary" style="width: 100%" (click)="onSearchClicked()">Filtruj</button>
  </div>
  <div class="col">
    <button class="btn btn-secondary" [disabled]="areFilterOptionsEmpty()" style="width: 100%; height: 100%; font-size: 14px" (click)="onClearFiltersClicked()">Czyść filtry</button>
  </div>
  <label *ngIf="showFoundHint" [style.color]="foundCount > 0 ? 'green' : 'red'" class="mx-auto d-block top-buffer" style="font-size: small; margin-bottom: 0">Znaleziono powierzeń: {{foundCount}}</label>
</div>

<ng-template ngbPanelContent #rtCourse let-r="result" let-t="term">
  <ngb-highlight [result]="r.code + ' - ' + r.name " [term]="t"></ngb-highlight>
</ng-template>
<ng-template ngbPanelContent #rtCourseInstructor let-r="result" let-t="term">
  <ngb-highlight class="row-cols-2" [result]="r.academicDegree + ' ' + r.firstName  + ' ' + r.surname" [term]="t"></ngb-highlight>
  <span class="row-cols-1 float-md-right" style="margin-left: 30px;">{{r.entrustedHours}} / {{r.additionalAttributes.pensum}}</span>
</ng-template>
<!--<pre>foundEntrustments: {{ foundEntrustments | json }}</pre>-->
